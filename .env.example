# VideoAnnotator Environment Configuration
# Copy this file to .env and customize for your environment
# Values can also be set as system environment variables

# ==============================================================================
# External Service Tokens
# ==============================================================================

# HuggingFace Authentication Token
# Get your token from: https://huggingface.co/settings/tokens
# You need to accept the terms for pyannote/speaker-diarization-3.1
HUGGINGFACE_TOKEN=your_huggingface_token_here

# Optional: OpenAI API Key for speech recognition
OPENAI_API_KEY=your_openai_api_key_here



# ==============================================================================
# Worker Configuration
# ==============================================================================

# Maximum number of jobs to process concurrently
# Lower values reduce GPU memory pressure but decrease throughput
# Recommendation: 1-2 for 6GB GPU, 2-4 for 8-12GB GPU, 4+ for 24GB+ GPU
MAX_CONCURRENT_JOBS=2

# Poll interval for checking new jobs (seconds)
WORKER_POLL_INTERVAL=5

# Maximum retry attempts for failed jobs
MAX_JOB_RETRIES=3

# Base delay for exponential backoff retry (seconds)
RETRY_DELAY_BASE=2.0

# ==============================================================================
# Storage Configuration
# ==============================================================================

# Base directory for job storage (results, logs, temp files)
STORAGE_BASE_DIR=./batch_results

# Days to retain completed job data (leave empty to never auto-delete)
# Only applies to terminal states (COMPLETED, FAILED, CANCELLED)
# STORAGE_RETENTION_DAYS=30

# ==============================================================================
# Security Configuration
# ==============================================================================

# Require API key authentication
AUTH_REQUIRED=true

# Path to token storage directory
TOKEN_DIR=./tokens

# Auto-generate API key on first startup if none exist
AUTO_GENERATE_KEY=true

# ==============================================================================
# API Server Configuration
# ==============================================================================

# Host to bind to (use 0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
API_HOST=0.0.0.0

# Port to listen on
API_PORT=18011

# CORS allowed origins (comma-separated)
# Default: localhost only (secure-by-default)
CORS_ORIGINS=http://localhost,http://localhost:18011

# Enable CORS credentials support
CORS_ALLOW_CREDENTIALS=true

# ==============================================================================
# Database Configuration
# ==============================================================================

# Database URL (defaults to SQLite)
# Examples:
#   SQLite: sqlite:///./videoannotator.db
#   PostgreSQL: postgresql://user:password@localhost/dbname
#   MySQL: mysql://user:password@localhost/dbname
DATABASE_URL=sqlite:///./videoannotator.db

# Enable database connection pool
DB_POOL_ENABLED=true

# Pool size for database connections
DB_POOL_SIZE=5

# ==============================================================================
# Logging Configuration
# ==============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log directory
LOG_DIR=./logs

# Enable structured JSON logging (useful for log aggregation)
LOG_JSON=false

# ==============================================================================
# Model Configuration
# ==============================================================================

# Cache directory for downloaded models
MODEL_CACHE_DIR=./models

# Device to use for inference (cpu, cuda, auto)
# auto = use CUDA if available, otherwise CPU
DEVICE=auto

# Use FP16 (half-precision) when available (reduces memory usage)
USE_FP16=true
